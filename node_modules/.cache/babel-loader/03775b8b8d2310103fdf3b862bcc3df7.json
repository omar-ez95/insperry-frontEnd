{"ast":null,"code":"import React,{useContext}from'react';import{Link}from\"react-router-dom\";import axios from\"axios\";import saveProduct from\"../../static/img/saveProduct.png\";import{BiSearchAlt}from\"react-icons/bi\";import{SiHomebridge}from\"react-icons/si\";import{ImProfile}from\"react-icons/im\";import{BiLogOut}from\"react-icons/bi\";import{Context}from\"../../contexts/UserContext\";function Header(){var _useContext=useContext(Context),setUser=_useContext.setUser,isAuthenticated=_useContext.isAuthenticated,setIsAuthenticated=_useContext.setIsAuthenticated,setToken=_useContext.setToken,token=_useContext.token;var logout=function logout(){var config={headers:{'Content-Type':'application/json','Access-Control-Allow-Origin':null}};var formData=new FormData();formData.append(\"Token\",token);axios.defaults.xsrfCookieName='csrftoken';axios.defaults.xsrfHeaderName='X-CSRFToken';axios.defaults.headers={'Content-Type':'application/json','Authorization':\"Token \".concat(token),'Access-Control-Allow-Origin':'*','Access-Control-Allow-Methods':'GET, POST, OPTIONS, PUT, DELETE','Access-Control-Allow-Headers':'X-Requested-With, Content-Type, X-Auth-Token, Origin, Authorization Access-Control-Allow-Origin'};config.headers['Authorization']=\"Token \".concat(token);axios.post('http://18.192.205.152/api/auth/logout/',null,{crossDomain:true,headers:{'Content-Type':'application/json','Authorization':\"Token \".concat(token),'Access-Control-Allow-Origin':'*','Access-Control-Allow-Methods':'GET, POST, OPTIONS, PUT, DELETE','Access-Control-Allow-Headers':'X-Requested-With, Content-Type, X-Auth-Token, Origin, Authorization Access-Control-Allow-Origin'}}).then(function(res){setIsAuthenticated(false);setToken('');setUser(null);localStorage.clear();console.log(localStorage,'localll');console.log(axios.defaults.headers,'axiosss');delete axios.defaults.headers.common[\"Authorization\"];// props.history.push(\"/\");\n}).catch(function(err){});};var authLinks=/*#__PURE__*/React.createElement(\"ul\",{className:\"footer-links\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(SiHomebridge,{className:\"header-icons\"}))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"/MyChoice\"},/*#__PURE__*/React.createElement(\"img\",{type:\"button\",src:saveProduct,alt:\"\"}))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"/search\"},/*#__PURE__*/React.createElement(BiSearchAlt,{className:\"header-icons\"}))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/profile/\"}},/*#__PURE__*/React.createElement(ImProfile,{className:\"header-icons\"}))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"header-button\",onClick:logout},/*#__PURE__*/React.createElement(BiLogOut,{className:\"header-icons\"}))));var guestLinks=/*#__PURE__*/React.createElement(\"ul\",{className:\"footer-links\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(SiHomebridge,{className:\"header-icons red-color\"}))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"/search\"},/*#__PURE__*/React.createElement(BiSearchAlt,{className:\"header-icons red-color\"}))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"/regestration\",className:\"red-color\"},\"Register\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Link,{to:\"/login\",className:\"red-color\"},\"Login\")));return/*#__PURE__*/React.createElement(\"div\",{className:\"cat-bottom\"},isAuthenticated?authLinks:guestLinks);}export default Header;","map":{"version":3,"sources":["/home/omar/Documents/inspery-FrontEnd/inspery/src/components/layouts/Header.js"],"names":["React","useContext","Link","axios","saveProduct","BiSearchAlt","SiHomebridge","ImProfile","BiLogOut","Context","Header","setUser","isAuthenticated","setIsAuthenticated","setToken","token","logout","config","headers","formData","FormData","append","defaults","xsrfCookieName","xsrfHeaderName","post","crossDomain","then","res","localStorage","clear","console","log","common","catch","err","authLinks","pathname","guestLinks"],"mappings":"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","sourcesContent":["import React, { useContext }  from 'react';\n\nimport { Link } from \"react-router-dom\";\n\nimport axios from \"axios\";\n\n\nimport saveProduct from \"../../static/img/saveProduct.png\";\n\n\n\nimport { BiSearchAlt } from \"react-icons/bi\";\nimport { SiHomebridge } from \"react-icons/si\";\nimport { ImProfile } from \"react-icons/im\";\nimport { BiLogOut } from \"react-icons/bi\";\n\nimport {Context} from \"../../contexts/UserContext\"\n\n\nfunction Header() {\n  const {setUser, isAuthenticated, setIsAuthenticated, setToken, token} = useContext(Context)\n\n\n  const logout = ()  => {\n\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': null,\n      },\n    };\n    var formData = new FormData();\n    formData.append(\"Token\", token); \n    axios.defaults.xsrfCookieName = 'csrftoken'\n    axios.defaults.xsrfHeaderName = 'X-CSRFToken'\n    axios.defaults.headers = {\n      'Content-Type': 'application/json',\n      'Authorization':`Token ${token}`,\n      'Access-Control-Allow-Origin': '*',\n      'Access-Control-Allow-Methods': 'GET, POST, OPTIONS, PUT, DELETE',\n      'Access-Control-Allow-Headers': 'X-Requested-With, Content-Type, X-Auth-Token, Origin, Authorization Access-Control-Allow-Origin'\n\n    }\n    config.headers['Authorization'] = `Token ${token}`;\n    axios\n      .post('http://18.192.205.152/api/auth/logout/', null, {crossDomain: true,headers: {\n        'Content-Type': 'application/json',\n        'Authorization':`Token ${token}`,\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Methods': 'GET, POST, OPTIONS, PUT, DELETE',\n        'Access-Control-Allow-Headers': 'X-Requested-With, Content-Type, X-Auth-Token, Origin, Authorization Access-Control-Allow-Origin'\n\n      } },\n           )\n      .then((res) => {\n        setIsAuthenticated(false)\n        setToken('')\n        setUser(null)\n        localStorage.clear()\n        console.log(localStorage,'localll')\n        console.log(axios.defaults.headers,'axiosss')\n\n        delete axios.defaults.headers.common[\"Authorization\"]; \n        // props.history.push(\"/\");\n      })\n      .catch((err) => {\n\n      });\n   };\n\n  const authLinks = (\n    <ul className=\"footer-links\">\n      <li>\n        <Link to=\"/\">\n          <SiHomebridge className=\"header-icons\" />\n        </Link>\n      </li>\n      <li>\n        <Link to=\"/MyChoice\">\n          <img type=\"button\" src={saveProduct} alt=\"\" />\n        </Link>\n      </li>\n      <li>\n        <Link to=\"/search\">\n          <BiSearchAlt className=\"header-icons\" />\n        </Link>\n      </li>\n      <li>\n          <Link\n            to={{\n              pathname: `/profile/`,\n\n            }}\n          >\n            <ImProfile\n              className=\"header-icons\"\n            />\n          </Link>\n      </li>\n      <li>\n            <button className=\"header-button\" onClick={logout}>\n            <BiLogOut\n              className=\"header-icons\"\n            />\n            </button>\n          \n      </li>\n    </ul>\n  );\n\n  const guestLinks = (\n    <ul className=\"footer-links\">\n      <li>\n        <Link to=\"/\">\n          <SiHomebridge className=\"header-icons red-color\" />\n        </Link>\n      </li>\n      <li>\n        <Link to=\"/search\">\n          <BiSearchAlt className=\"header-icons red-color\" />\n        </Link>\n      </li>\n      <li>\n        <Link to=\"/regestration\" className=\"red-color\">Register</Link>\n      </li>\n      <li>\n        <Link to=\"/login\" className=\"red-color\">Login</Link>\n      </li>\n    </ul>\n  );\n\n  return <div className=\"cat-bottom\">{isAuthenticated ? authLinks : guestLinks}</div>;\n}\n\nexport default Header;\n"]},"metadata":{},"sourceType":"module"}