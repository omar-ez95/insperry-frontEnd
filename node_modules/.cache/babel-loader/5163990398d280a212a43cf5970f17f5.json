{"ast":null,"code":"import _slicedToArray from\"/home/omar/Documents/inspery-FrontEnd/inspery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";import axios from\"axios\";import{Context}from\"../../contexts/UserContext\";function RestaurantCommentsForm(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),body=_useState2[0],setBody=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),userId=_useState4[0],setUserId=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),restaurant=_useState6[0],setRestaurant=_useState6[1];var _useState7=useState(new Date()),_useState8=_slicedToArray(_useState7,1),date=_useState8[0];var _useContext=useContext(Context),user=_useContext.user;useEffect(function(){setRestaurant(props.restaurant);setUserId(user.id);},[props.restaurant,user.id]);var onSubmit=function onSubmit(e){e.preventDefault();var formData=new FormData();formData.append(\"user\",userId);formData.append(\"restaurant\",restaurant);formData.append(\"date\",date);formData.append(\"body\",body);// const config = {\n//   headers: {\n//     \"Content-Type\": \"application/json\",\n//   },\n// };\naxios.defaults.xsrfCookieName=\"csrftoken\";axios.defaults.xsrfHeaderName=\"X-CSRFToken\";axios.post(\"http://18.192.205.152/api/comments/\".concat(restaurant,\"/\"),formData,{crossDomain:true},{withCredentials:true}).then(function(response){props.setComments(response.data);}).catch(function(err){return console.log(err);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body mt-4 mb-4\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"textarea\",{className:\"form-control\",type:\"text\",name:\"body\",onChange:function onChange(e){return setBody(e.target.value);},value:body})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn \"},\"Comment\")))));}export default RestaurantCommentsForm;","map":{"version":3,"sources":["/home/omar/Documents/inspery-FrontEnd/inspery/src/components/restaurants/RestaurantCommentsForm.js"],"names":["React","useState","useEffect","useContext","axios","Context","RestaurantCommentsForm","props","body","setBody","userId","setUserId","restaurant","setRestaurant","Date","date","user","id","onSubmit","e","preventDefault","formData","FormData","append","defaults","xsrfCookieName","xsrfHeaderName","post","crossDomain","withCredentials","then","response","setComments","data","catch","err","console","log","target","value"],"mappings":"oKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,UAArC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,OAAT,KAAwB,4BAAxB,CAIA,QAASC,CAAAA,sBAAT,CAAgCC,KAAhC,CAAuC,CACrC,cAAwBN,QAAQ,CAAC,EAAD,CAAhC,wCAAOO,IAAP,eAAaC,OAAb,eACA,eAA4BR,QAAQ,CAAC,CAAD,CAApC,yCAAOS,MAAP,eAAeC,SAAf,eACA,eAAoCV,QAAQ,CAAC,CAAD,CAA5C,yCAAOW,UAAP,eAAmBC,aAAnB,eACA,eAAeZ,QAAQ,CAAC,GAAIa,CAAAA,IAAJ,EAAD,CAAvB,yCAAOC,IAAP,eAEA,gBAAiBZ,UAAU,CAACE,OAAD,CAA3B,CAAQW,IAAR,aAAQA,IAAR,CAEAd,SAAS,CAAC,UAAM,CACdW,aAAa,CAACN,KAAK,CAACK,UAAP,CAAb,CACAD,SAAS,CAACK,IAAI,CAACC,EAAN,CAAT,CACD,CAHQ,CAGN,CAACV,KAAK,CAACK,UAAP,CAAkBI,IAAI,CAACC,EAAvB,CAHM,CAAT,CAIA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,CAAD,CAAO,CACtBA,CAAC,CAACC,cAAF,GACA,GAAIC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAf,CACAD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBb,MAAxB,EACAW,QAAQ,CAACE,MAAT,CAAgB,YAAhB,CAA8BX,UAA9B,EACAS,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBR,IAAxB,EACAM,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBf,IAAxB,EACA;AACA;AACA;AACA;AACA;AACAJ,KAAK,CAACoB,QAAN,CAAeC,cAAf,CAAgC,WAAhC,CACArB,KAAK,CAACoB,QAAN,CAAeE,cAAf,CAAgC,aAAhC,CACAtB,KAAK,CACFuB,IADH,8CAE0Cf,UAF1C,MAEwDS,QAFxD,CAGI,CAAEO,WAAW,CAAE,IAAf,CAHJ,CAII,CAAEC,eAAe,CAAE,IAAnB,CAJJ,EAMGC,IANH,CAMQ,SAACC,QAAD,CAAc,CAClBxB,KAAK,CAACyB,WAAN,CAAmBD,QAAQ,CAACE,IAA5B,EACD,CARH,EAQKC,KARL,CAQW,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EARd,EASD,CAvBD,CAyBA,mBAEI,2BAAK,SAAS,CAAC,EAAf,eAEI,2BAAK,SAAS,CAAC,0BAAf,eACE,4BAAM,QAAQ,CAAEjB,QAAhB,eACE,2BAAK,SAAS,CAAC,YAAf,eACE,gCACE,SAAS,CAAC,cADZ,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,MAHP,CAIE,QAAQ,CAAE,kBAACC,CAAD,QAAOV,CAAAA,OAAO,CAACU,CAAC,CAACmB,MAAF,CAASC,KAAV,CAAd,EAJZ,CAKE,KAAK,CAAE/B,IALT,EADF,CADF,cAUE,2BAAK,SAAS,CAAC,YAAf,eACE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,MAAhC,YADF,CAVF,CADF,CAFJ,CAFJ,CA0BD,CAED,cAAeF,CAAAA,sBAAf","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\n\nimport { Context } from \"../../contexts/UserContext\";\n\n\n\nfunction RestaurantCommentsForm(props) {\n  const [body, setBody] = useState(\"\");\n  const [userId, setUserId] = useState(0);\n  const [restaurant, setRestaurant] = useState(0);\n  const [date] = useState(new Date());\n\n  const { user } = useContext(Context);\n\n  useEffect(() => {\n    setRestaurant(props.restaurant);\n    setUserId(user.id);\n  }, [props.restaurant,user.id]);\n  const onSubmit = (e) => {\n    e.preventDefault();\n    var formData = new FormData();\n    formData.append(\"user\", userId);\n    formData.append(\"restaurant\", restaurant);\n    formData.append(\"date\", date);\n    formData.append(\"body\", body);\n    // const config = {\n    //   headers: {\n    //     \"Content-Type\": \"application/json\",\n    //   },\n    // };\n    axios.defaults.xsrfCookieName = \"csrftoken\";\n    axios.defaults.xsrfHeaderName = \"X-CSRFToken\";\n    axios\n      .post(\n        `http://18.192.205.152/api/comments/${restaurant}/`,formData,\n        { crossDomain: true },\n        { withCredentials: true }\n      )\n      .then((response) => {\n        props.setComments( response.data);\n      }).catch(err => console.log(err));\n  };\n\n  return (\n    \n      <div className=\"\">\n        \n          <div className=\"card card-body mt-4 mb-4\">\n            <form onSubmit={onSubmit}>\n              <div className=\"form-group\">\n                <textarea\n                  className=\"form-control\"\n                  type=\"text\"\n                  name=\"body\"\n                  onChange={(e) => setBody(e.target.value)}\n                  value={body}\n                />\n              </div>\n              <div className=\"form-group\">\n                <button type=\"submit\" className=\"btn \">\n                  Comment\n                </button>\n              </div>\n            </form>\n          </div>\n        \n      \n    </div>\n  );\n}\n\nexport default RestaurantCommentsForm;\n"]},"metadata":{},"sourceType":"module"}