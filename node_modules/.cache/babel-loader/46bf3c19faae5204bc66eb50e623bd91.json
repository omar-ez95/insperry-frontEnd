{"ast":null,"code":"var _jsxFileName = \"/home/omar/Documents/inspery-FrontEnd/inspery/src/components/Rescategorys.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\nimport { Row } from \"react-bootstrap\";\nimport Card from \"./common/card\";\n\nfunction Rescategorys() {\n  const [loading, setLoading] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [categoryPerPage] = useState(4);\n  const [rescategorys, setRescategorys] = useState([]);\n  const [totalRescategorys, setTotalRescategorys] = useState(0);\n  const [showCategory, setShowCategory] = useState([]);\n  const pageNumbers = Math.ceil(totalRescategorys / categoryPerPage);\n  useEffect(() => {\n    axios.get(\"http://18.192.205.152/api/rescategorys/\", {\n      crossDomain: true\n    }, {\n      withCredentials: true\n    }).then(response => {\n      setRescategorys(response.data);\n      setTotalRescategorys(response.data.length);\n    }).catch(err => console.log(err));\n  }, []);\n\n  const handleScroll = event => {\n    const {\n      scrollTop,\n      clientHeight,\n      scrollHeight\n    } = event.currentTarget;\n    if (currentPage + 1 > pageNumbers) return;\n\n    if (scrollHeight - scrollTop === clientHeight) {\n      setCurrentPage(prev => prev + 1);\n    }\n  };\n\n  useEffect(() => {\n    const loadCategorys = async () => {\n      setLoading(true);\n      const indexOfLastCategory = currentPage * categoryPerPage;\n      const indexOfFirstCategory = indexOfLastCategory - categoryPerPage;\n      const currentCategorys = rescategorys.slice(indexOfFirstCategory, indexOfLastCategory);\n      setShowCategory(prev => [...prev, ...currentCategorys]);\n      setLoading(false);\n    };\n\n    loadCategorys();\n  }, [currentPage, rescategorys, categoryPerPage]);\n  const cards = showCategory.map(rescategory => /*#__PURE__*/React.createElement(Card, {\n    key: rescategory.id,\n    item: rescategory,\n    link: `/rescategory/${rescategory.name}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    onScroll: handleScroll,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"page-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, \"MAIN\"), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, cards), loading && /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 23\n    }\n  }, \"Loading ...\"))));\n}\n\nRescategorys.propTypes = {\n  rescategorys: PropTypes.array\n};\nexport default Rescategorys;","map":{"version":3,"sources":["/home/omar/Documents/inspery-FrontEnd/inspery/src/components/Rescategorys.js"],"names":["React","useState","useEffect","axios","PropTypes","Row","Card","Rescategorys","loading","setLoading","currentPage","setCurrentPage","categoryPerPage","rescategorys","setRescategorys","totalRescategorys","setTotalRescategorys","showCategory","setShowCategory","pageNumbers","Math","ceil","get","crossDomain","withCredentials","then","response","data","length","catch","err","console","log","handleScroll","event","scrollTop","clientHeight","scrollHeight","currentTarget","prev","loadCategorys","indexOfLastCategory","indexOfFirstCategory","currentCategorys","slice","cards","map","rescategory","id","name","propTypes","array"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\nimport { Row } from \"react-bootstrap\";\nimport Card from \"./common/card\";\nfunction Rescategorys() {\n  const [loading, setLoading] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [categoryPerPage] = useState(4);\n  const [rescategorys, setRescategorys] = useState([]);\n  const [totalRescategorys, setTotalRescategorys] = useState(0);\n  const [showCategory, setShowCategory] = useState([]);\n\n  const pageNumbers = Math.ceil(totalRescategorys / categoryPerPage);\n  useEffect(() => {\n    axios\n      .get(\n        \"http://18.192.205.152/api/rescategorys/\",\n        { crossDomain: true },\n        { withCredentials: true }\n      )\n      .then((response) => {\n        setRescategorys(response.data);\n        setTotalRescategorys(response.data.length);\n      }).catch(err => console.log(err));\n  }, []);\n\n  const handleScroll = (event) => {\n    const { scrollTop, clientHeight, scrollHeight } = event.currentTarget;\n    if(currentPage +1 > pageNumbers)return\n    if (scrollHeight - scrollTop === clientHeight) {\n      setCurrentPage((prev) => prev + 1);\n    }\n  };\n\n  useEffect(() => {\n    const loadCategorys = async () => {\n      setLoading(true);\n      const indexOfLastCategory = currentPage * categoryPerPage;\n      const indexOfFirstCategory = indexOfLastCategory - categoryPerPage;\n      const currentCategorys = rescategorys.slice(indexOfFirstCategory, indexOfLastCategory);\n      setShowCategory((prev) => [...prev, ...currentCategorys]);\n      setLoading(false);\n    };\n    loadCategorys();\n  }, [currentPage,rescategorys,categoryPerPage]);\n\n  const cards = showCategory.map((rescategory) => (\n    <Card\n      key={rescategory.id}\n      item={rescategory}\n      link={`/rescategory/${rescategory.name}`}\n    />\n  ));\n\n  return (\n    <div>\n      <section>\n        <div className=\"container-fluid\" onScroll={handleScroll}>\n          <h1 className=\"page-name\">MAIN</h1>\n          <Row >\n            {cards}\n          </Row>\n          {loading && <h1>Loading ...</h1>}\n        </div>\n      </section>\n    </div>\n  );\n}\n\nRescategorys.propTypes = {\n  rescategorys: PropTypes.array,\n};\nexport default Rescategorys;\n"]},"metadata":{},"sourceType":"module"}