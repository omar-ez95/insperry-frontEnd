{"ast":null,"code":"import _slicedToArray from\"/home/omar/Documents/inspery-FrontEnd/inspery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import follow_n from'../../static/img/follow_n.png';import follow_active from'../../static/img/follow_active.png';import{Context}from\"../../contexts/UserContext\";function Follow(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),follow=_useState2[0],setFollow=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),restaurantId=_useState4[0],setRestaurantId=_useState4[1];var _useContext=useContext(Context),isAuthenticated=_useContext.isAuthenticated,token=_useContext.token;var checkFollow=function checkFollow(){var f={option:1,id:restaurantId};getFollow(f);};var navigate=useNavigate();useEffect(function(){if(isAuthenticated===false){navigate(\"/login\");}setRestaurantId(props.restaurant);var f={option:0,id:restaurantId};if(restaurantId){getFollow(f);}},[isAuthenticated]);// axios.get(`http://18.192.205.152:8000/app/api/follow/${f.id}/`,{option:f.option},{crossDomain: true,headers: {\n//         'Content-Type': 'application/json',\n//         'Authorization':`Token ${token}`,\n//         'Access-Control-Allow-Origin': '*',\n//         'Access-Control-Allow-Methods': 'GET, POST, OPTIONS, PUT, DELETE',\n//         'Access-Control-Allow-Headers': 'X-Requested-With, Content-Type, X-Auth-Token, Origin, Authorization Access-Control-Allow-Origin'\n//       } })\nfunction getFollow(f){axios.defaults.headers.common['Authorization']='Token '+token;axios({method:'get',url:\"http://18.192.205.152/app/api/follow/\".concat(f.id,\"/\").concat(f.option),data:{'option':f.option},crossDomain:true,headers:{'Content-Type':'application/json','Authorization':\"Token \".concat(token),'Access-Control-Allow-Origin':'*','Access-Control-Allow-Methods':'GET, POST, OPTIONS, PUT, DELETE','Access-Control-Allow-Headers':'X-Requested-With, Content-Type, X-Auth-Token, Origin, Authorization Access-Control-Allow-Origin'}}).then(function(res){setFollow(res.data);}).catch(function(err){return console.log(err);});}return/*#__PURE__*/React.createElement(\"div\",null,follow.follow==='true'?/*#__PURE__*/React.createElement(\"img\",{type:\"button\",className:\"buttons-color\",onClick:checkFollow,src:follow_active,alt:\"\"}):/*#__PURE__*/React.createElement(\"img\",{type:\"button\",className:\"buttons-color\",onClick:checkFollow,src:follow_n,alt:\"\"}));}export default Follow;","map":{"version":3,"sources":["/home/omar/Documents/inspery-FrontEnd/inspery/src/components/restaurants/Follow.js"],"names":["React","useState","useEffect","useContext","useNavigate","axios","follow_n","follow_active","Context","Follow","props","follow","setFollow","restaurantId","setRestaurantId","isAuthenticated","token","checkFollow","f","option","id","getFollow","navigate","restaurant","defaults","headers","common","method","url","data","crossDomain","then","res","catch","err","console","log"],"mappings":"oKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,UAArC,KAAuD,OAAvD,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,QAAP,KAAqB,+BAArB,CACA,MAAOC,CAAAA,aAAP,KAA0B,oCAA1B,CAEA,OAAQC,OAAR,KAAsB,4BAAtB,CAEA,QAASC,CAAAA,MAAT,CAAgBC,KAAhB,CAAuB,CACnB,cAA0BT,QAAQ,CAAC,EAAD,CAAlC,wCAAOU,MAAP,eAAeC,SAAf,eACA,eAAqCX,QAAQ,CAAC,CAAD,CAA7C,yCAAOY,YAAP,eAAoBC,eAApB,eACA,gBAAiCX,UAAU,CAACK,OAAD,CAA3C,CAAOO,eAAP,aAAOA,eAAP,CAAwBC,KAAxB,aAAwBA,KAAxB,CAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,GAAMC,CAAAA,CAAC,CAAG,CACNC,MAAM,CAAG,CADH,CAENC,EAAE,CAAGP,YAFC,CAAV,CAIAQ,SAAS,CAACH,CAAD,CAAT,CACH,CAND,CAOA,GAAMI,CAAAA,QAAQ,CAAGlB,WAAW,EAA5B,CAEAF,SAAS,CAAC,UAAM,CACd,GAAIa,eAAe,GAAK,KAAxB,CAA+B,CAC7BO,QAAQ,CAAC,QAAD,CAAR,CACD,CACCR,eAAe,CAACJ,KAAK,CAACa,UAAP,CAAf,CACA,GAAML,CAAAA,CAAC,CAAG,CACNC,MAAM,CAAG,CADH,CAENC,EAAE,CAAGP,YAFC,CAAV,CAIA,GAAGA,YAAH,CAAgB,CACZQ,SAAS,CAACH,CAAD,CAAT,CACH,CACJ,CAZQ,CAYP,CAACH,eAAD,CAZO,CAAT,CAcA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA,QAASM,CAAAA,SAAT,CAAmBH,CAAnB,CAAqB,CACjBb,KAAK,CAACmB,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,EAAiD,SAASV,KAA1D,CACAX,KAAK,CAAC,CACFsB,MAAM,CAAE,KADN,CAEFC,GAAG,gDAA0CV,CAAC,CAACE,EAA5C,aAAkDF,CAAC,CAACC,MAApD,CAFD,CAGFU,IAAI,CAAE,CACF,SAASX,CAAC,CAACC,MADT,CAHJ,CAMFW,WAAW,CAAE,IANX,CAOFL,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,gCAAyBT,KAAzB,CAFK,CAGL,8BAA+B,GAH1B,CAIL,+BAAgC,iCAJ3B,CAKL,+BAAgC,iGAL3B,CAPP,CAAD,CAAL,CAgBKe,IAhBL,CAgBU,SAAAC,GAAG,CAAI,CACbpB,SAAS,CAACoB,GAAG,CAACH,IAAL,CAAT,CACH,CAlBD,EAkBGI,KAlBH,CAkBS,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAlBZ,EAmBH,CAEG,mBACI,+BACMvB,MAAM,CAACA,MAAP,GAAkB,MAAlB,cAA2B,2BAAM,IAAI,CAAC,QAAX,CAAoB,SAAS,CAAC,eAA9B,CAA8C,OAAO,CAAEM,WAAvD,CAAoE,GAAG,CAAEV,aAAzE,CAAwF,GAAG,CAAC,EAA5F,EAA3B,cAA8H,2BAAM,IAAI,CAAC,QAAX,CAAoB,SAAS,CAAC,eAA9B,CAA8C,OAAO,CAAEU,WAAvD,CAAoE,GAAG,CAAEX,QAAzE,CAAmF,GAAG,CAAC,EAAvF,EADpI,CADJ,CAMP,CAGD,cAAeG,CAAAA,MAAf","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\"\nimport axios from \"axios\";\n\nimport follow_n from '../../static/img/follow_n.png';\nimport follow_active from '../../static/img/follow_active.png';\n\nimport {Context} from \"../../contexts/UserContext\"\n\nfunction Follow(props) {\n    const [follow, setFollow]=useState([])\n    const [restaurantId,setRestaurantId]=useState(0)\n    const {isAuthenticated, token} = useContext(Context)\n\n    const checkFollow = () => {\n        const f = {\n            option : 1,\n            id : restaurantId\n        }\n        getFollow(f);\n    };\n    const navigate = useNavigate();\n\n    useEffect(() => {\n      if (isAuthenticated === false) {\n        navigate(\"/login\");\n      }\n        setRestaurantId(props.restaurant)\n        const f = {\n            option : 0,\n            id : restaurantId\n        }\n        if(restaurantId){\n            getFollow(f)\n        }\n    },[isAuthenticated])\n\n    // axios.get(`http://18.192.205.152:8000/app/api/follow/${f.id}/`,{option:f.option},{crossDomain: true,headers: {\n    //         'Content-Type': 'application/json',\n    //         'Authorization':`Token ${token}`,\n    //         'Access-Control-Allow-Origin': '*',\n    //         'Access-Control-Allow-Methods': 'GET, POST, OPTIONS, PUT, DELETE',\n    //         'Access-Control-Allow-Headers': 'X-Requested-With, Content-Type, X-Auth-Token, Origin, Authorization Access-Control-Allow-Origin'\n    \n    //       } })\n\n    function getFollow(f){\n        axios.defaults.headers.common['Authorization'] = 'Token '+token;\n        axios({\n            method: 'get',\n            url: `http://18.192.205.152/app/api/follow/${f.id}/${f.option}`,\n            data: {\n                'option':f.option\n            },\n            crossDomain: true,\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization':`Token ${token}`,\n                'Access-Control-Allow-Origin': '*',\n                'Access-Control-Allow-Methods': 'GET, POST, OPTIONS, PUT, DELETE',\n                'Access-Control-Allow-Headers': 'X-Requested-With, Content-Type, X-Auth-Token, Origin, Authorization Access-Control-Allow-Origin'\n        \n              } \n\n          }).then(res => {\n            setFollow(res.data)\n        }).catch(err => console.log(err));\n    }\n\n        return (       \n            <div>\n                { follow.follow === 'true' ? <img  type=\"button\" className=\"buttons-color\" onClick={checkFollow} src={follow_active} alt=\"\"/> : <img  type=\"button\" className=\"buttons-color\" onClick={checkFollow} src={follow_n} alt=\"\"/> }\n            </div>\n        )\n\n}\n\n\nexport default Follow;"]},"metadata":{},"sourceType":"module"}