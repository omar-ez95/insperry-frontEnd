{"ast":null,"code":"import _slicedToArray from\"/home/omar/Documents/inspery-FrontEnd/inspery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import axios from\"axios\";import{Link}from\"react-router-dom\";import saveProductActive from\"../../static/img/saveProductActive.png\";import saveProduct from\"../../static/img/saveProduct.png\";import{Context}from\"../../contexts/UserContext\";function FavoriteProduct(props){var _useContext=useContext(Context),isAuthenticated=_useContext.isAuthenticated,token=_useContext.token;var _useState=useState({check:null}),_useState2=_slicedToArray(_useState,2),favoriteProduct=_useState2[0],setFavoriteProduct=_useState2[1];var getFavoriteProduct=function getFavoriteProduct(f){axios.defaults.headers.common[\"Authorization\"]=\"Token \"+token;var data=f;axios.get(\"http://18.192.205.152/api/favorite_product/\".concat(f.id,\"/\").concat(f.option),data).then(function(res){setFavoriteProduct(res.data);}).catch(function(err){return console.log(err);});};var checkFavoriteProduct=function checkFavoriteProduct(){var f={option:1,id:props.id};getFavoriteProduct(f);};useEffect(function(){var f={option:0,id:props.id};if(isAuthenticated){getFavoriteProduct(f);}});// componentDidMount() {\n//     const h = store.getState();\n//     const t = h.auth.isAuthenticated;\n//     console.log('hhhhhhh',t)\n//     const f = {\n//         option : 0,\n//         id : this.props.id\n//     }\n//     if(t==true){\n//     this.getFavoriteProduct(f);\n//     }\n// }\nreturn/*#__PURE__*/React.createElement(\"div\",null,isAuthenticated?favoriteProduct.check===\"true\"?/*#__PURE__*/React.createElement(\"img\",{className:\"buttons-color\",type:\"button\",onClick:checkFavoriteProduct,src:saveProductActive,alt:\"\"}):/*#__PURE__*/React.createElement(\"img\",{className:\"buttons-color\",type:\"button\",onClick:checkFavoriteProduct,src:saveProduct,alt:\"\"}):/*#__PURE__*/React.createElement(Link,{to:\"/login\"},/*#__PURE__*/React.createElement(\"img\",{className:\"buttons-color\",src:saveProduct,alt:\"\"})));}export default FavoriteProduct;","map":{"version":3,"sources":["/home/omar/Documents/inspery-FrontEnd/inspery/src/components/menu/FavoriteProduct.js"],"names":["React","useContext","useEffect","useState","axios","Link","saveProductActive","saveProduct","Context","FavoriteProduct","props","isAuthenticated","token","check","favoriteProduct","setFavoriteProduct","getFavoriteProduct","f","defaults","headers","common","data","get","id","option","then","res","catch","err","console","log","checkFavoriteProduct"],"mappings":"oKAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,QAAvC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,MAAOC,CAAAA,iBAAP,KAA8B,wCAA9B,CACA,MAAOC,CAAAA,WAAP,KAAwB,kCAAxB,CAGA,OAASC,OAAT,KAAwB,4BAAxB,CAEA,QAASC,CAAAA,eAAT,CAAyBC,KAAzB,CAAgC,CAC9B,gBAAmCT,UAAU,CAACO,OAAD,CAA7C,CAAQG,eAAR,aAAQA,eAAR,CAAyBC,KAAzB,aAAyBA,KAAzB,CAEA,cAA8CT,QAAQ,CAAC,CACrDU,KAAK,CAAE,IAD8C,CAAD,CAAtD,wCAAOC,eAAP,eAAwBC,kBAAxB,eAGA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,CAAD,CAAO,CAEhCb,KAAK,CAACc,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,EAAiD,SAAWR,KAA5D,CACA,GAAMS,CAAAA,IAAI,CAAGJ,CAAb,CACAb,KAAK,CACFkB,GADH,sDACqDL,CAAC,CAACM,EADvD,aAC6DN,CAAC,CAACO,MAD/D,EACyEH,IADzE,EAEGI,IAFH,CAEQ,SAACC,GAAD,CAAS,CACbX,kBAAkB,CAACW,GAAG,CAACL,IAAL,CAAlB,CACD,CAJH,EAKGM,KALH,CAKS,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EALT,EAMD,CAVD,CAYA,GAAMG,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAM,CACjC,GAAMd,CAAAA,CAAC,CAAG,CACRO,MAAM,CAAE,CADA,CAERD,EAAE,CAAEb,KAAK,CAACa,EAFF,CAAV,CAIAP,kBAAkB,CAACC,CAAD,CAAlB,CACD,CAND,CAQAf,SAAS,CAAC,UAAM,CACd,GAAMe,CAAAA,CAAC,CAAG,CACRO,MAAM,CAAE,CADA,CAERD,EAAE,CAAEb,KAAK,CAACa,EAFF,CAAV,CAIA,GAAIZ,eAAJ,CAAqB,CACnBK,kBAAkB,CAACC,CAAD,CAAlB,CACD,CACF,CARQ,CAAT,CASA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA,mBACE,+BACGN,eAAe,CACdG,eAAe,CAACD,KAAhB,GAA0B,MAA1B,cACE,2BAAK,SAAS,CAAC,eAAf,CACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAEkB,oBAFX,CAGE,GAAG,CAAEzB,iBAHP,CAIE,GAAG,CAAC,EAJN,EADF,cAQE,2BAAK,SAAS,CAAC,eAAf,CACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAEyB,oBAFX,CAGE,GAAG,CAAExB,WAHP,CAIE,GAAG,CAAC,EAJN,EATY,cAiBd,oBAAC,IAAD,EAAM,EAAE,CAAC,QAAT,eACE,2BAAK,SAAS,CAAC,eAAf,CAA+B,GAAG,CAAEA,WAApC,CAAiD,GAAG,CAAC,EAArD,EADF,CAlBJ,CADF,CA2BD,CAED,cAAeE,CAAAA,eAAf","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nimport saveProductActive from \"../../static/img/saveProductActive.png\";\nimport saveProduct from \"../../static/img/saveProduct.png\";\n\n\nimport { Context } from \"../../contexts/UserContext\";\n\nfunction FavoriteProduct(props) {\n  const { isAuthenticated, token } = useContext(Context);\n\n  const [favoriteProduct, setFavoriteProduct] = useState({\n    check: null,\n  });\n  const getFavoriteProduct = (f) => {\n\n    axios.defaults.headers.common[\"Authorization\"] = \"Token \" + token;\n    const data = f;\n    axios\n      .get(`http://18.192.205.152/api/favorite_product/${f.id}/${f.option}`, data)\n      .then((res) => {\n        setFavoriteProduct(res.data)\n      })\n      .catch((err) => console.log(err));\n  };\n\n  const checkFavoriteProduct = () => {\n    const f = {\n      option: 1,\n      id: props.id,\n    };\n    getFavoriteProduct(f);\n  };\n\n  useEffect(() => {\n    const f = {\n      option: 0,\n      id: props.id,\n    };\n    if (isAuthenticated) {\n      getFavoriteProduct(f);\n    }\n  }, );\n  // componentDidMount() {\n  //     const h = store.getState();\n\n  //     const t = h.auth.isAuthenticated;\n  //     console.log('hhhhhhh',t)\n  //     const f = {\n  //         option : 0,\n  //         id : this.props.id\n  //     }\n  //     if(t==true){\n  //     this.getFavoriteProduct(f);\n\n  //     }\n  // }\n\n  return (\n    <div>\n      {isAuthenticated ? (\n        favoriteProduct.check === \"true\" ? (\n          <img className=\"buttons-color\"\n            type=\"button\"\n            onClick={checkFavoriteProduct}\n            src={saveProductActive}\n            alt=\"\"\n          />\n        ) : (\n          <img className=\"buttons-color\"\n            type=\"button\"\n            onClick={checkFavoriteProduct}\n            src={saveProduct}\n            alt=\"\"\n          />\n        )\n      ) : (\n        <Link to=\"/login\">\n          <img className=\"buttons-color\" src={saveProduct} alt=\"\" />\n        </Link>\n      )}\n      {/* {this.state.favoriteProduct.check == 'true' ? <img   type=\"button\" onClick={this.checkFavoriteProduct} src={saveProductActive} alt=\"\"/> : \n                <img  type=\"button\"   onClick={this.checkFavoriteProduct} src={saveProduct} alt=\"\"/> } */}\n    </div>\n  );\n}\n\nexport default FavoriteProduct;\n"]},"metadata":{},"sourceType":"module"}