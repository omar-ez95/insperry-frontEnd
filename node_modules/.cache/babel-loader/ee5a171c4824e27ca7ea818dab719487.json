{"ast":null,"code":"import _slicedToArray from\"/home/omar/Documents/inspery-FrontEnd/inspery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import ProfilePhoto from\"../profile/ProfilePhoto\";import{Context}from\"../../contexts/UserContext\";import RestaurantCommentsForm from\"./RestaurantCommentsForm\";function RestaurantComments(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useContext=useContext(Context),isAuthenticated=_useContext.isAuthenticated;var navigate=useNavigate();useEffect(function(){if(isAuthenticated===false){navigate(\"/login\");}axios.get(\"http://18.192.205.152/api/comments/\".concat(props.restaurantId),{crossDomain:true},{withCredentials:true}).then(function(response){setComments(response.data);});});var commentsList=comments.map(function(comment){return/*#__PURE__*/React.createElement(\"div\",{className:\"comment-box\",key:comment.id},/*#__PURE__*/React.createElement(ProfilePhoto,{username:comment.user}),/*#__PURE__*/React.createElement(\"div\",{className:\"text-box\"},comment.body,/*#__PURE__*/React.createElement(\"p\",null,\"- \",formatTime(comment.date))),/*#__PURE__*/React.createElement(\"ul\",null));});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"card comments-modal\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\"},commentsList)),/*#__PURE__*/React.createElement(RestaurantCommentsForm,{restaurant:props.restaurantId,setComments:setComments}));}function formatTime(time){var prefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"\";var t=new Date(time).toLocaleDateString();return t;}export default RestaurantComments;","map":{"version":3,"sources":["/home/omar/Documents/inspery-FrontEnd/inspery/src/components/restaurants/RestaurantComments.js"],"names":["React","useState","useEffect","useContext","axios","useNavigate","ProfilePhoto","Context","RestaurantCommentsForm","RestaurantComments","props","comments","setComments","isAuthenticated","navigate","get","restaurantId","crossDomain","withCredentials","then","response","data","commentsList","map","comment","id","user","body","formatTime","date","time","prefix","t","Date","toLocaleDateString"],"mappings":"oKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,UAArC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CAGA,MAAOC,CAAAA,YAAP,KAAyB,yBAAzB,CACA,OAASC,OAAT,KAAwB,4BAAxB,CACA,MAAOC,CAAAA,sBAAP,KAAmC,0BAAnC,CAEA,QAASC,CAAAA,kBAAT,CAA4BC,KAA5B,CAAmC,CACjC,cAAgCT,QAAQ,CAAC,EAAD,CAAxC,wCAAOU,QAAP,eAAiBC,WAAjB,eAEA,gBAA4BT,UAAU,CAACI,OAAD,CAAtC,CAAQM,eAAR,aAAQA,eAAR,CAEA,GAAMC,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CAEAH,SAAS,CAAC,UAAM,CACd,GAAIW,eAAe,GAAK,KAAxB,CAA+B,CAC7BC,QAAQ,CAAC,QAAD,CAAR,CACD,CACDV,KAAK,CACFW,GADH,8CAE0CL,KAAK,CAACM,YAFhD,EAGI,CAAEC,WAAW,CAAE,IAAf,CAHJ,CAII,CAAEC,eAAe,CAAE,IAAnB,CAJJ,EAMGC,IANH,CAMQ,SAACC,QAAD,CAAc,CAClBR,WAAW,CAACQ,QAAQ,CAACC,IAAV,CAAX,CACD,CARH,EASD,CAbQ,CAAT,CAeA,GAAMC,CAAAA,YAAY,CAAGX,QAAQ,CAACY,GAAT,CAAa,SAACC,OAAD,qBAChC,2BAAK,SAAS,CAAC,aAAf,CAA6B,GAAG,CAAEA,OAAO,CAACC,EAA1C,eACE,oBAAC,YAAD,EAAc,QAAQ,CAAED,OAAO,CAACE,IAAhC,EADF,cAEE,2BAAK,SAAS,CAAC,UAAf,EACGF,OAAO,CAACG,IADX,cAEE,kCAAMC,UAAU,CAACJ,OAAO,CAACK,IAAT,CAAhB,CAFF,CAFF,cAME,8BANF,CADgC,EAAb,CAArB,CAUA,mBACE,4CACE,2BAAK,SAAS,CAAC,qBAAf,eACE,2BAAK,SAAS,CAAC,EAAf,EAAmBP,YAAnB,CADF,CADF,cAIE,oBAAC,sBAAD,EACE,UAAU,CAAEZ,KAAK,CAACM,YADpB,CAEE,WAAW,CAAEJ,WAFf,EAJF,CADF,CAWD,CAED,QAASgB,CAAAA,UAAT,CAAoBE,IAApB,CAAuC,IAAbC,CAAAA,MAAa,2DAAJ,EAAI,CACrC,GAAMC,CAAAA,CAAC,CAAG,GAAIC,CAAAA,IAAJ,CAASH,IAAT,EAAeI,kBAAf,EAAV,CACA,MAAOF,CAAAA,CAAP,CACD,CAED,cAAevB,CAAAA,kBAAf","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\n\n\nimport ProfilePhoto from \"../profile/ProfilePhoto\";\nimport { Context } from \"../../contexts/UserContext\";\nimport RestaurantCommentsForm from \"./RestaurantCommentsForm\";\n\nfunction RestaurantComments(props) {\n  const [comments, setComments] = useState([]);\n\n  const { isAuthenticated } = useContext(Context);\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (isAuthenticated === false) {\n      navigate(\"/login\");\n    }\n    axios\n      .get(\n        `http://18.192.205.152/api/comments/${props.restaurantId}`,\n        { crossDomain: true },\n        { withCredentials: true }\n      )\n      .then((response) => {\n        setComments(response.data);\n      });\n  }, );\n\n  const commentsList = comments.map((comment) => (\n    <div className=\"comment-box\" key={comment.id}>\n      <ProfilePhoto username={comment.user} />\n      <div className=\"text-box\">\n        {comment.body}\n        <p>- {formatTime(comment.date)}</p>\n      </div>\n      <ul></ul>\n    </div>\n  ));\n  return (\n    <div>\n      <div className=\"card comments-modal\">\n        <div className=\"\">{commentsList}</div>\n      </div>\n      <RestaurantCommentsForm\n        restaurant={props.restaurantId}\n        setComments={setComments}\n      />\n    </div>\n  );\n}\n\nfunction formatTime(time, prefix = \"\") {\n  const t = new Date(time).toLocaleDateString();\n  return t;\n}\n\nexport default RestaurantComments;\n"]},"metadata":{},"sourceType":"module"}