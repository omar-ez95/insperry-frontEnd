{"ast":null,"code":"var _jsxFileName = \"/home/omar/Documents/inspery-FrontEnd/inspery/src/components/restaurants/RestaurantCommentsForm.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { Context } from \"../../contexts/UserContext\";\n\nfunction RestaurantCommentsForm(props) {\n  const [body, setBody] = useState(\"\");\n  const [userId, setUserId] = useState(0);\n  const [restaurant, setRestaurant] = useState(0);\n  const [date] = useState(new Date());\n  const {\n    user\n  } = useContext(Context);\n  useEffect(() => {\n    setRestaurant(props.restaurant);\n    setUserId(user.id);\n  }, [props.restaurant, user.id]);\n\n  const onSubmit = e => {\n    e.preventDefault();\n    var formData = new FormData();\n    formData.append(\"user\", userId);\n    formData.append(\"restaurant\", restaurant);\n    formData.append(\"date\", date);\n    formData.append(\"body\", body); // const config = {\n    //   headers: {\n    //     \"Content-Type\": \"application/json\",\n    //   },\n    // };\n\n    axios.defaults.xsrfCookieName = \"csrftoken\";\n    axios.defaults.xsrfHeaderName = \"X-CSRFToken\";\n    axios.post(`http://18.192.205.152/api/comments/${restaurant}/`, formData, {\n      crossDomain: true\n    }, {\n      withCredentials: true\n    }).then(response => {\n      props.setComments(response.data);\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-body mt-4 mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"form-control\",\n    type: \"text\",\n    name: \"body\",\n    onChange: e => setBody(e.target.value),\n    value: body,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, \"Comment\")))));\n}\n\nexport default RestaurantCommentsForm;","map":{"version":3,"sources":["/home/omar/Documents/inspery-FrontEnd/inspery/src/components/restaurants/RestaurantCommentsForm.js"],"names":["React","useState","useEffect","useContext","axios","Context","RestaurantCommentsForm","props","body","setBody","userId","setUserId","restaurant","setRestaurant","date","Date","user","id","onSubmit","e","preventDefault","formData","FormData","append","defaults","xsrfCookieName","xsrfHeaderName","post","crossDomain","withCredentials","then","response","setComments","data","catch","err","console","log","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\n\nimport { Context } from \"../../contexts/UserContext\";\n\n\n\nfunction RestaurantCommentsForm(props) {\n  const [body, setBody] = useState(\"\");\n  const [userId, setUserId] = useState(0);\n  const [restaurant, setRestaurant] = useState(0);\n  const [date] = useState(new Date());\n\n  const { user } = useContext(Context);\n\n  useEffect(() => {\n    setRestaurant(props.restaurant);\n    setUserId(user.id);\n  }, [props.restaurant,user.id]);\n  const onSubmit = (e) => {\n    e.preventDefault();\n    var formData = new FormData();\n    formData.append(\"user\", userId);\n    formData.append(\"restaurant\", restaurant);\n    formData.append(\"date\", date);\n    formData.append(\"body\", body);\n    // const config = {\n    //   headers: {\n    //     \"Content-Type\": \"application/json\",\n    //   },\n    // };\n    axios.defaults.xsrfCookieName = \"csrftoken\";\n    axios.defaults.xsrfHeaderName = \"X-CSRFToken\";\n    axios\n      .post(\n        `http://18.192.205.152/api/comments/${restaurant}/`,formData,\n        { crossDomain: true },\n        { withCredentials: true }\n      )\n      .then((response) => {\n        props.setComments( response.data);\n      }).catch(err => console.log(err));\n  };\n\n  return (\n    \n      <div className=\"\">\n        \n          <div className=\"card card-body mt-4 mb-4\">\n            <form onSubmit={onSubmit}>\n              <div className=\"form-group\">\n                <textarea\n                  className=\"form-control\"\n                  type=\"text\"\n                  name=\"body\"\n                  onChange={(e) => setBody(e.target.value)}\n                  value={body}\n                />\n              </div>\n              <div className=\"form-group\">\n                <button type=\"submit\" className=\"btn \">\n                  Comment\n                </button>\n              </div>\n            </form>\n          </div>\n        \n      \n    </div>\n  );\n}\n\nexport default RestaurantCommentsForm;\n"]},"metadata":{},"sourceType":"module"}