{"ast":null,"code":"import _slicedToArray from\"/home/omar/Documents/inspery-FrontEnd/inspery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";var Context=React.createContext();function UserContext(_ref){var children=_ref.children;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAuthenticated=_useState4[0],setIsAuthenticated=_useState4[1];var _useState5=useState({email:'',id:0,username:''}),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];useEffect(function(){delete axios.defaults.headers.common[\"Authorization\"];localStorage.clear();var userData=null;if(localStorage.userData){userData=JSON.parse(localStorage.userData);}if(userData){setIsAuthenticated(true);setToken(userData.token);setUser(userData.user);}},[]);return/*#__PURE__*/React.createElement(Context.Provider,{value:{token:token,setToken:setToken,isAuthenticated:isAuthenticated,setIsAuthenticated:setIsAuthenticated,user:user,setUser:setUser}},children);}export{UserContext,Context};","map":{"version":3,"sources":["/home/omar/Documents/inspery-FrontEnd/inspery/src/contexts/UserContext.js"],"names":["React","useState","useEffect","axios","Context","createContext","UserContext","children","token","setToken","isAuthenticated","setIsAuthenticated","email","id","username","user","setUser","defaults","headers","common","localStorage","clear","userData","JSON","parse"],"mappings":"oKAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,GAAMC,CAAAA,OAAO,CAAGJ,KAAK,CAACK,aAAN,EAAhB,CAEA,QAASC,CAAAA,WAAT,MAAiC,IAAXC,CAAAA,QAAW,MAAXA,QAAW,CAC7B,cAA0BN,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eACA,eAA8CR,QAAQ,CAAC,KAAD,CAAtD,yCAAOS,eAAP,eAAwBC,kBAAxB,eACA,eAAwBV,QAAQ,CAAC,CACDW,KAAK,CAAC,EADL,CAEDC,EAAE,CAAC,CAFF,CAGDC,QAAQ,CAAC,EAHR,CAAD,CAAhC,yCAAOC,IAAP,eAAaC,OAAb,eAKAd,SAAS,CAAC,UAAI,CACV,MAAOC,CAAAA,KAAK,CAACc,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,CAAP,CACAC,YAAY,CAACC,KAAb,GAEA,GAAKC,CAAAA,QAAQ,CAAG,IAAhB,CACA,GAAGF,YAAY,CAACE,QAAhB,CAA0B,CACtBA,QAAQ,CAAEC,IAAI,CAACC,KAAL,CAAWJ,YAAY,CAACE,QAAxB,CAAV,CACH,CACD,GAAGA,QAAH,CAAY,CACPX,kBAAkB,CAAC,IAAD,CAAlB,CACAF,QAAQ,CAACa,QAAQ,CAACd,KAAV,CAAR,CACAQ,OAAO,CAACM,QAAQ,CAACP,IAAV,CAAP,CACJ,CACJ,CAbQ,CAaP,EAbO,CAAT,CAcA,mBACI,oBAAC,OAAD,CAAS,QAAT,EAAkB,KAAK,CAAE,CACrBP,KAAK,CAALA,KADqB,CAErBC,QAAQ,CAARA,QAFqB,CAGrBC,eAAe,CAAfA,eAHqB,CAIrBC,kBAAkB,CAAlBA,kBAJqB,CAKrBI,IAAI,CAAJA,IALqB,CAMrBC,OAAO,CAAPA,OANqB,CAAzB,EAQKT,QARL,CADJ,CAYH,CAED,OAAQD,WAAR,CAAqBF,OAArB","sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport axios from \"axios\";\nconst Context = React.createContext()\n\nfunction UserContext({children}) {\n    const [token, setToken] = useState('')\n    const [isAuthenticated, setIsAuthenticated] = useState(false)\n    const [user, setUser] = useState({\n                                    email:'',\n                                    id:0,\n                                    username:'', \n                                })\n    useEffect(()=>{\n        delete axios.defaults.headers.common[\"Authorization\"];\n        localStorage.clear()\n\n        let  userData = null\n        if(localStorage.userData ){\n            userData= JSON.parse(localStorage.userData)\n        }\n        if(userData){\n             setIsAuthenticated(true)\n             setToken(userData.token)\n             setUser(userData.user)\n        }\n    },[])\n    return (\n        <Context.Provider value={{\n            token, \n            setToken, \n            isAuthenticated, \n            setIsAuthenticated, \n            user, \n            setUser\n        }}>\n            {children}\n        </Context.Provider>\n    )\n}\n\nexport {UserContext, Context}"]},"metadata":{},"sourceType":"module"}