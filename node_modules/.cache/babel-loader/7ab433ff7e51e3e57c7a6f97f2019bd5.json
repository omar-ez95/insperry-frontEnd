{"ast":null,"code":"import _regeneratorRuntime from\"/home/omar/Documents/inspery-FrontEnd/inspery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/omar/Documents/inspery-FrontEnd/inspery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/omar/Documents/inspery-FrontEnd/inspery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/omar/Documents/inspery-FrontEnd/inspery/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Row}from\"react-bootstrap\";import Card from\"./common/card\";function Rescategorys(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(4),_useState6=_slicedToArray(_useState5,1),categoryPerPage=_useState6[0];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),rescategorys=_useState8[0],setRescategorys=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),totalRescategorys=_useState10[0],setTotalRescategorys=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),showCategory=_useState12[0],setShowCategory=_useState12[1];var pageNumbers=Math.ceil(totalRescategorys/categoryPerPage);useEffect(function(){axios.get(\"http://18.192.205.152/api/rescategorys/\",{crossDomain:true},{withCredentials:true}).then(function(response){setRescategorys(response.data);setTotalRescategorys(response.data.length);});},[]);var handleScroll=function handleScroll(event){var _event$currentTarget=event.currentTarget,scrollTop=_event$currentTarget.scrollTop,clientHeight=_event$currentTarget.clientHeight,scrollHeight=_event$currentTarget.scrollHeight;if(currentPage+1>pageNumbers)return;if(scrollHeight-scrollTop===clientHeight){setCurrentPage(function(prev){return prev+1;});}};useEffect(function(){var loadCategorys=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var indexOfLastCategory,indexOfFirstCategory,currentCategorys;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);indexOfLastCategory=currentPage*categoryPerPage;indexOfFirstCategory=indexOfLastCategory-categoryPerPage;currentCategorys=rescategorys.slice(indexOfFirstCategory,indexOfLastCategory);setShowCategory(function(prev){return[].concat(_toConsumableArray(prev),_toConsumableArray(currentCategorys));});setLoading(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function loadCategorys(){return _ref.apply(this,arguments);};}();loadCategorys();},[currentPage,rescategorys,categoryPerPage]);var cards=showCategory.map(function(rescategory){return/*#__PURE__*/React.createElement(Card,{key:rescategory.id,item:rescategory,link:\"/rescategory/\".concat(rescategory.name)});});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\",onScroll:handleScroll},/*#__PURE__*/React.createElement(\"h1\",{className:\"page-name\"},\"MAIN\"),/*#__PURE__*/React.createElement(Row,null,cards),loading&&/*#__PURE__*/React.createElement(\"h1\",null,\"Loading ...\"))));}export default Rescategorys;","map":{"version":3,"sources":["/home/omar/Documents/inspery-FrontEnd/inspery/src/components/Rescategorys.js"],"names":["React","useState","useEffect","axios","Row","Card","Rescategorys","loading","setLoading","currentPage","setCurrentPage","categoryPerPage","rescategorys","setRescategorys","totalRescategorys","setTotalRescategorys","showCategory","setShowCategory","pageNumbers","Math","ceil","get","crossDomain","withCredentials","then","response","data","length","handleScroll","event","currentTarget","scrollTop","clientHeight","scrollHeight","prev","loadCategorys","indexOfLastCategory","indexOfFirstCategory","currentCategorys","slice","cards","map","rescategory","id","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\nimport { Row } from \"react-bootstrap\";\nimport Card from \"./common/card\";\nfunction Rescategorys() {\n  const [loading, setLoading] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [categoryPerPage] = useState(4);\n  const [rescategorys, setRescategorys] = useState([]);\n  const [totalRescategorys, setTotalRescategorys] = useState(0);\n  const [showCategory, setShowCategory] = useState([]);\n\n  const pageNumbers = Math.ceil(totalRescategorys / categoryPerPage);\n  useEffect(() => {\n    axios\n      .get(\n        \"http://18.192.205.152/api/rescategorys/\",\n        { crossDomain: true },\n        { withCredentials: true }\n      )\n      .then((response) => {\n        setRescategorys(response.data);\n        setTotalRescategorys(response.data.length);\n      });\n  }, []);\n\n  const handleScroll = (event) => {\n    const { scrollTop, clientHeight, scrollHeight } = event.currentTarget;\n    if(currentPage +1 > pageNumbers)return\n    if (scrollHeight - scrollTop === clientHeight) {\n      setCurrentPage((prev) => prev + 1);\n    }\n  };\n\n  useEffect(() => {\n    const loadCategorys = async () => {\n      setLoading(true);\n      const indexOfLastCategory = currentPage * categoryPerPage;\n      const indexOfFirstCategory = indexOfLastCategory - categoryPerPage;\n      const currentCategorys = rescategorys.slice(indexOfFirstCategory, indexOfLastCategory);\n      setShowCategory((prev) => [...prev, ...currentCategorys]);\n      setLoading(false);\n    };\n    loadCategorys();\n  }, [currentPage,rescategorys,categoryPerPage]);\n\n  const cards = showCategory.map((rescategory) => (\n    <Card\n      key={rescategory.id}\n      item={rescategory}\n      link={`/rescategory/${rescategory.name}`}\n    />\n  ));\n\n  return (\n    <div>\n      <section>\n        <div className=\"container-fluid\" onScroll={handleScroll}>\n          <h1 className=\"page-name\">MAIN</h1>\n          <Row >\n            {cards}\n          </Row>\n          {loading && <h1>Loading ...</h1>}\n        </div>\n      </section>\n    </div>\n  );\n}\n\nRescategorys.propTypes = {\n  rescategorys: PropTypes.array,\n};\nexport default Rescategorys;\n"]},"metadata":{},"sourceType":"module"}